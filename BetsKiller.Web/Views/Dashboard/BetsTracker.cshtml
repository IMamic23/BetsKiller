@{
    ViewBag.Title = "BetsTracker";
    Layout = "~/Views/Dashboard/_Layout.cshtml";
}

@section Styles {
    @Styles.Render("~/Content/dashboard-css")
    @Styles.Render("~/Content/Dashboard/BetsTracker.css")
    @Styles.Render("~/Content/Dashboard/simplePagination.css")
}

@model BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerViewModel

<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Bets tracker
        <small>NBA</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="/Dashboard/"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Bets tracker</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">

    <!-- Main row -->
    <div class="row">

        <!-- Game results -->
        <section class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="box box-primary scores-mainbox animateWithDelayTop">
                <div class="box-body scores-body">
                    <div class="tab-content">
                        <div class="contain-div">
                            <div class="row cycle-slideshow"
                                 data-cycle-fx=carousel
                                 data-cycle-speed="4000"
                                 data-cycle-timeout=1
                                 data-cycle-easing="linear"
                                 data-cycle-carousel-fluid="true"
                                 data-cycle-pause-on-hover="true"
                                 data-cycle-slides="> div"
                                 data-cycle-log="false">
                                @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerGameScoreViewModel game in this.Model.GameScores)
                                {
                                    <div class="main-box">
                                        <div class="game-box">
                                            <div class="game-date">@game.Date<span class="game-prog" style="@game.Status.Style">@game.Status.Value</span></div>
                                            <div class="game-opp">@game.AwayTeam<span class="score-opp">@game.AwayScore</span></div>
                                            <div class="game-at">@game.HomeTeam<span class="score-at">@game.HomeScore</span></div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Overall stats -->
        <section class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="box box-primary animateWithDelayTop">
                <div class="box-header with-border mainStats">
                    <ul class="nav nav-tabs nav-justified betsKillerNav two-way-nav" id="analysisProfit">
                        @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerAnalysisProfitViewModel analyseProfit in this.Model.AnalysisProfit)
                        {
                            <li>
                                <a href="#@analyseProfit.Name" data-toggle="tab"><h5><strong>@analyseProfit.Label</strong></h5></a>
                            </li>
                        }
                    </ul>
                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                        <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="tab-content">
                        @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerAnalysisProfitViewModel analyseProfit in this.Model.AnalysisProfit)
                        {
                            <div role="tabpanel" class="tab-pane" id="@analyseProfit.Name">
                                <!-- Total Bets -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem01">
                                        <span class="info-box-icon bg-aqua"><i class="fa fa-folder-open"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Total Bets</span>
                                            <span class="info-box-number2">@analyseProfit.TotalBets</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Wins -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem02">
                                        <span class="info-box-icon bg-green"><i class="fa fa-thumbs-up"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Wins</span>
                                            <span class="info-box-number2">@analyseProfit.Wins</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- fix for small devices only -->
                                <div class="clearfix visible-sm-block"></div>

                                <!-- Losses -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem03">
                                        <span class="info-box-icon bg-red"><i class="fa fa-thumbs-down"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Losses</span>
                                            <span class="info-box-number2">@analyseProfit.Losses</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Average Odds -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem04">
                                        <span class="info-box-icon bg-blue-active"><i class="fa fa-balance-scale"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Average Odds</span>
                                            <span class="info-box-number2">@analyseProfit.AverageOdds</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- ROI -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem05">
                                        <span class="info-box-icon bg-purple-active">
                                            <i class="fa fa-line-chart"></i>
                                        </span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">ROI</span>
                                            <span class="info-box-number2">@analyseProfit.ROI %</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Total Profit -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem06">
                                        <span class="info-box-icon bg-green-active"><i class="fa fa-money"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Total Profit</span>
                                            <span class="info-box-number2">$ @analyseProfit.TotalProfit</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </section>

        <!-- Section-Left -->
        <section class="col-lg-3 col-md-4 col-sm-12 col-xs-12 connectedSortable ui-sortable">

            <!-- Betting Profiles -->
            <section class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="box box-primary animateWithDelayLeft">
                    <div class="box-header with-border">
                        <i class="fa fa-trophy"></i>
                        <h3 class="box-title"><span class="label label-warning">PREMIUM</span> Betting Profiles</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="col-md-12">
                            <div class="list-group bettingProfilesList" id="betting-profiles">
                                @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerBettingProfileViewModel bettingProfile in this.Model.BettingProfiles)
                                {
                                    <a href="javascript:getBettingProfile('@bettingProfile.Id')" class="list-group-item @(bettingProfile.ActiveTab ? "active" : string.Empty)">
                                        <span class="sparktristate">@bettingProfile.LastBetsStatus</span>
                                        <span class="badge">@bettingProfile.OpenBets</span>
                                        @bettingProfile.Label
                                    </a>
                                }
                            </div>
                            <div id="betting-profiles-nav"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Performance -->
            <section class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="box box-primary animateWithDelayLeft">
                    <div class="box-header with-border">
                        <i class="fa fa-trophy"></i>
                        <h3 class="box-title"><span class="label label-warning">PREMIUM</span> Performance</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="table-responsive">
                            <table class="table table-striped" style="text-align:center">
                                <thead>
                                    <tr>
                                        <th style="text-align:center">Profile</th>
                                        <th style="text-align:center">ROI</th>
                                        <th style="text-align:center">Profit</th>
                                </thead>
                                <tbody>
                                    @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerPerformanceViewModel performance in this.Model.Performances)
                                    {
                                        <tr>
                                            <td align="center">@performance.Profile</td>
                                            <td align="center">@performance.ROI %</td>
                                            <td align="center">@performance.Profit Units</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

        </section>

        <!-- Section-Right -->
        <section class="col-lg-9 col-md-8 col-sm-12 col-xs-12 connectedSortable ui-sortable">

            <!-- Bets Tracker Bets History -->
            <section class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="box box-primary tracker-box animateWithDelayRight">
                    <div class="box-header with-border">
                        <h3 class="box-title">PROFILE NAME<small>  Bets History</small></h3>
                        <!-- Create/Delete profile-->
                        <div class="profile-actions pull-right">
                            <div class="btn-group hidden-xs">
                                <div class="newBetBtn">
                                    <button type="button" class="btn btn-default btn-sm bg-purple dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-pencil-square-o" aria-hidden="true"></i>New Bet <span class="fa fa-caret-down"></span></button>
                                    <ul class="dropdown-menu">
                                        <li><a href="javascript:createSingle()">Single</a></li>
                                        <li><a href="javascript:createParlay()">Parlay</a></li>
                                    </ul>
                                </div>
                                <a href="" class="btn btn-warning btn-sm btn-reset-filter btn-profile"><i class="fa fa-refresh" aria-hidden="true"></i><span>Reset Filters</span></a>
                                <a href="javascript:createNewProfile('0')" class="btn btn-primary btn-sm btn-new-profile btn-profile"><i class="fa fa-plus" aria-hidden="true"></i><span>New profile</span></a>
                                <a href="javascript:deleteBettingProfile('0')" class="btn btn-danger btn-sm btn-delete-profile btn-profile hidden"><i class="fa fa-trash" aria-hidden="true"></i><span>Delete profile</span></a>
                                <a href="javascript:exportBettingProfile('0')" class="btn btn-success btn-sm btn-to-excel btn-profile"><i class="fa fa-file-excel-o" aria-hidden="true"></i><span>Export to Excel</span></a>
                            </div>
                            <div class="btn-group visible-xs bets-tracker-actions">
                                <button class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-bars"></i><span class="fa fa-caret-down"></span></button>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a href="#">New bet-Single</a></li>
                                    <li><a href="#">New bet-Parlay</a></li>
                                    <li><a href="#">Reset Filters</a></li>
                                    <li><a href="#">New Profile</a></li>
                                    <li><a href="#">Delete Profile</a></li>
                                    <li><a href="#">Export to Excel</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <!-- Filters -->
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 button_group">
                                <div class="horizontalText"><span>Filters</span></div>
                                <div class="dropdown marginleft15">
                                    <button id="gameSiteBtn" class="customBtn01 button_md dropdown-toggle" type="button" data-toggle="dropdown">
                                        <span class="buttonLabel">Game Site</span>
                                        <span class="bottom_border"></span>
                                        <i class="fa fa-filter" aria-hidden="true"></i>
                                        <span id="gameSiteList-text" class="btnText">All Games</span>
                                        <span class="fa fa-caret-down caret_down"></span>
                                    </button>
                                    <ul id="gameSiteList" class="dropdown-menu">
                                        <li><a>All Games</a></li>
                                        <li><a>Home</a></li>
                                        <li><a>Away</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown">
                                    <button id="betTypesBtn" class="customBtn01 button_md dropdown-toggle" type="button" data-toggle="dropdown">
                                        <span class="buttonLabel">Bet Types</span>
                                        <span class="bottom_border"></span>
                                        <i class="fa fa-filter" aria-hidden="true"></i>
                                        <span id="betTypesList-text" class="btnText">All Bet Types</span>
                                        <span class="fa fa-caret-down caret_down"></span>
                                    </button>
                                    <ul id="betTypesList" class="dropdown-menu">
                                        <li><a>All Bet Types</a></li>
                                        <li><a>Totals</a></li>
                                        <li><a>Moneyline</a></li>
                                        <li><a>Handicap</a></li>
                                        <li><a>Parlay</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown marginleft15_xs">
                                    <button id="betSizesBtn" class="customBtn01 button_md dropdown-toggle" type="button" data-toggle="dropdown">
                                        <span class="buttonLabel">Bet Sizes</span>
                                        <span class="bottom_border"></span>
                                        <i class="fa fa-filter" aria-hidden="true"></i>
                                        <span id="betSizesList-text" class="btnText">All Bet Sizes</span>
                                        <span class="fa fa-caret-down caret_down"></span>
                                    </button>
                                    <ul id="betSizesList" class="dropdown-menu">
                                        <li><a>All Bet Sizes</a></li>
                                        <li><a>1 - 5 Units</a></li>
                                        <li><a>5 - 10 Units</a></li>
                                        <li><a>10+ Units</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown">
                                    <button id="gameTimesBtn" class="customBtn01 button_md dropdown-toggle" type="button" data-toggle="dropdown">
                                        <span class="buttonLabel">Game Times</span>
                                        <span class="bottom_border"></span>
                                        <i class="fa fa-filter" aria-hidden="true"></i>
                                        <span id="gameTimesList-text" class="btnText">All Time</span>
                                        <span class="fa fa-caret-down caret_down"></span>
                                    </button>
                                    <ul id="gameTimesList" class="dropdown-menu">
                                        <li><a>All Time</a></li>
                                        <li><a>Last 7 days</a></li>
                                        <li><a>Last 14 days</a></li>
                                        <li><a>Last 30 days</a></li>
                                        <li><a>Last 60 days</a></li>
                                        <li><a>Last 90 days</a></li>
                                        <li><a>Last 6 months</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12">
                                <!-- Bets -->
                                <div class="table-responsive" style="padding-top:10px">
                                    <table id="bets-table" class="table table-striped responsive-utilities jambo_table">
                                        <thead>
                                            <tr class="headings">
                                                <th>Ticket type</th>
                                                <th>Date</th>
                                                <th>Game</th>
                                                <th>Bet Amount</th>
                                                <th>Odds</th>
                                                <th>Bet Value</th>
                                                <th>Bet Status</th>
                                                <th>Profit/Loss</th>
                                                <th>Site</th>
                                                <th>Edit</th>
                                                <th>Delete</th>
                                                <th>Add to profile</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileBetViewModel bet in this.Model.DefaultProfile.Bets)
                                            {
                                                <tr>
                                                    <td>@bet.Type</td>
                                                    <td>@bet.Timestamp</td>
                                                    <td>@bet.Game</td>
                                                    <td>@bet.BetAmount</td>
                                                    <td>@bet.Odds</td>
                                                    <td>@bet.BetValue</td>
                                                    <td>@bet.BetStatus</td>
                                                    <td>@bet.ProfitLoss</td>
                                                    <td>@bet.Site</td>
                                                    <td>@bet.Id</td>
                                                    <td>@bet.Id</td>
                                                    <td>@bet.Id</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="box-footer">
                        <div class="row">
                            <div class="col-lg-12">
                                <!-- Total Bets -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box info-box-smaller">
                                        <span class="info-box-icon info-box-icon-smaller text-aqua"><i class="fa fa-folder-open"></i></span>
                                        <div class="info-box-content info-box-content-smaller">
                                            <span class="info-box-text">Total Bets</span>
                                            <span id="totalBets-bets" class="info-box-number2">@this.Model.DefaultProfile.InfoBoxesValues[0]</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- Wins -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box info-box-smaller">
                                        <span class="info-box-icon info-box-icon-smaller text-green"><i class="fa fa-thumbs-up"></i></span>
                                        <div class="info-box-content info-box-content-smaller">
                                            <span class="info-box-text">Wins</span>
                                            <span id="wins-bets" class="info-box-number2">@this.Model.DefaultProfile.InfoBoxesValues[1]</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- Losses -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box info-box-smaller">
                                        <span class="info-box-icon info-box-icon-smaller text-red"><i class="fa fa-thumbs-down"></i></span>
                                        <div class="info-box-content info-box-content-smaller">
                                            <span class="info-box-text">Losses</span>
                                            <span id="losses-bets" class="info-box-number2">@this.Model.DefaultProfile.InfoBoxesValues[2]</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- Average Odds -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box info-box-smaller">
                                        <span class="info-box-icon info-box-icon-smaller text-blue"><i class="fa fa-balance-scale"></i></span>
                                        <div class="info-box-content info-box-content-smaller">
                                            <span class="info-box-text">Average Odds</span>
                                            <span id="averageOdds-bets" class="info-box-number2">@this.Model.DefaultProfile.InfoBoxesValues[3]</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- ROI -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box info-box-smaller">
                                        <span class="info-box-icon info-box-icon-smaller text-purple">
                                            <i class="fa fa-line-chart"></i>
                                        </span>
                                        <div class="info-box-content info-box-content-smaller">
                                            <span class="info-box-text">ROI</span>
                                            <span id="roi-bets" class="info-box-number2">@this.Model.DefaultProfile.InfoBoxesValues[4]</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- Total Profit -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box info-box-smaller">
                                        <span class="info-box-icon info-box-icon-smaller text-green"><i class="fa fa-money"></i></span>
                                        <div class="info-box-content info-box-content-smaller">
                                            <span class="info-box-text">Total Profit</span>
                                            <span id="totalProfit-bets" class="info-box-number2">@this.Model.DefaultProfile.InfoBoxesValues[5]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="box-footer">
                        <div class="row">
                            <!-- Statistics -->
                            <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                <ul class="nav nav-tabs nav-justified betsKillerNav three-way-nav" id="statistics">
                                    @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileStatisticViewModel stat in this.Model.DefaultProfile.Statistics)
                                    {
                                        <li @(stat.ActiveTab ? "class=active" : string.Empty)>
                                            <a href="#@stat.Name-stat" data-toggle="tab"><h5><strong>@stat.Label</strong></h5></a>
                                        </li>
                                    }
                                </ul>
                                <div class="tab-content">
                                    @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileStatisticViewModel stat in this.Model.DefaultProfile.Statistics)
                                    {
                                        <div role="tabpanel" class="tab-pane @(stat.ActiveTab ? "active" : string.Empty)" id="@stat.Name-stat">
                                            <div class="table-responsive">
                                                <table class="table table-striped" style="text-align:center">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center">Date</th>
                                                            <th class="text-center">Wins</th>
                                                            <th class="text-center">Losses</th>
                                                            <th class="text-center">Invested</th>
                                                            <th class="text-center">Profit +/-</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileStatisticElementViewModel statElem in stat.Data)
                                                        {
                                                            <tr class="text-center">
                                                                <td>@statElem.Date</td>
                                                                <td>@statElem.Wins</td>
                                                                <td>@statElem.Losses</td>
                                                                <td>@statElem.Invested</td>
                                                                <td>@statElem.Profit</td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                            <!-- Charts -->
                            <div class="row">
                                <div class="table-responsive sparkline-box">
                                    <span>Profit:</span>
                                    <div class="sparkline"
                                         data-type="line"
                                         data-spot-radius="3"
                                         data-highlight-spot-color="#f39c12"
                                         data-highlight-line-color="#222"
                                         data-min-spot-color="#f56954"
                                         data-max-spot-color="#00a65a"
                                         data-spot-color="#39CCCC"
                                         data-offset="90"
                                         data-width="100%"
                                         data-height="100px"
                                         data-line-width="2"
                                         data-line-color="#39CCCC"
                                         data-fill-color="rgba(57, 204, 204, 0.08)">
                                        6,4,7,8,4,3,-2,2,5,6,7,4,-1,-5,2,4,9,8,7,6
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                            <ul class="nav nav-tabs nav-justified betsKillerNav four-way-nav" id="charts">
                                @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileChartViewModel chart in this.Model.DefaultProfile.Charts)
                                {
                                    <li @(chart.ActiveTab ? "class=active" : string.Empty)>
                                        <a href="#@chart.Name" data-toggle="tab"><h5><strong>@chart.Label</strong></h5></a>
                                    </li>
                                }
                            </ul>
                            <div class="tab-content">
                                @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileChartViewModel chart in this.Model.DefaultProfile.Charts)
                                {
                                    <div role="tabpanel" class="tab-pane @(chart.ActiveTab ? "active" : string.Empty)" id="@chart.Name">
                                        <div class="col-md-8 col-sm-8 col-xs-8">
                                            <canvas id="@chart.Name-chart" height="150"></canvas>
                                        </div>
                                        <div class="col-md-4 col-sm-4 col-xs-4">
                                            <ul class="chart-legend clearfix">
                                                <li><i class="fa fa-circle-o text-red"></i> Total</li>
                                                <li><i class="fa fa-circle-o text-green"></i> Moneyline</li>
                                                <li><i class="fa fa-circle-o text-yellow"></i> Handicap</li>
                                                <li><i class="fa fa-circle-o text-aqua"></i> Parlay</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-12 col-xs-12">
                                            <ul class="nav nav-pills nav-stacked visible-xs">
                                                <li class="margin-l-r-10">Total</li>
                                                <li class="margin-l-r-10">Moneyline</li>
                                                <li class="margin-l-r-10">Handicap</li>
                                                <li class="margin-l-r-10">Parlay</li>
                                            </ul>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </section>

    </div>
</section>
<!-- MODAL WINDOWS-->
<div class="delete-profile">
    <div id="modal-delete-profile" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" style="color:white; opacity:.8;" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Delete Profile</h4>
                </div>
                <div class="modal-body text-center">
                    <p>Are you sure you want to delete this profile?</p>
                    <span class="label label-warning">If you delete it, You will lose all bets history and profits from this profile.</span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger">Confirm</button>
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    @Scripts.Render("~/bundles/dashboard-betstracker")

    <script>
        function getBettingProfile(id) {
            $.ajax({
                type: 'POST',
                url: '/Dashboard/BetsTrackerGetProfile',
                data: {
                    id: id
                },
                success: function (data) {
                    if (data.Response.Success) {
                        // If default profile, hide delete profile button
                        if (id == 0) {
                            $('.btn-delete-profile').addClass('hidden');
                        }
                        else {
                            $('.btn-delete-profile').removeClass('hidden');
                        }

                        // Activate selected betting profile
                        $('#betting-profiles a').removeClass('active');
                        $('#betting-profiles a[href*=' + id + ']').addClass('active');

                        // Reset filters
                        $.each($('[id$="-text"]'), function (index, value) {
                            var elementName = $(value).attr('id').split('-text')[0];
                            $(value).text($('#' + elementName + ' li')[0].innerText);
                        });

                        // Reset search input field
                        $('#bets-table_filter').find('input').val("");
                        table.search( '' ).columns().search( '' );

                        // Update profile info boxes
                        $.each($('[id$="-bets"]'), function (index, value) {
                            $(value).text(data.BetsTrackerBettingProfileDataViewModel.InfoBoxesValues[index]);
                        });

                        // Update profile bets
                        table.clear();
                        $.each(data.BetsTrackerBettingProfileDataViewModel.Bets, function (index, value) {
                            table.row.add([
                                value.Type,
                                value.Timestamp,
                                value.Game,
                                value.BetAmount,
                                value.Odds,
                                value.BetValue,
                                value.BetStatus,
                                value.ProfitLoss,
                                value.Site,
                                value.Id,
                                value.Id,
                                value.Id
                            ])
                        });
                        table.draw();

                        // Update profile statistics
                        $.each(statTables, function (index, value) {
                            value.clear();
                            $.each(data.BetsTrackerBettingProfileDataViewModel.Statistics[index].Data, function (innerIndex, innerValue) {
                                value.row.add([
                                    innerValue.Date,
                                    innerValue.Wins,
                                    innerValue.Losses,
                                    innerValue.Invested,
                                    innerValue.Profit
                                ])
                            });
                            value.draw();
                        });
                        $('#statistics a:first').tab('show');

                        // Update profile charts
                        chartData = [];
                        $.each(data.BetsTrackerBettingProfileDataViewModel.Charts, function(index, value) {
                            chartData.push([value.TotalValue, value.MoneylineValue, value.Handicap, value.Parlay]);
                        });
                        $('#charts li:first').removeClass('active');
                        $('#charts a:first').tab('show');
                    }
                    else {
                        alert('Getting profile failed!');
                    }
                },
                error: function (data) {
                    alert('Getting profile failed!');
                }
            });
        }

        function deleteBettingProfile(id) {
            $.ajax({
                type: 'POST',
                url: '/Dashboard/BetsTrackerDeleteProfile',
                data: {
                    id: id
                },
                success: function (data) {
                    if (data.Response.Success) {
                        getBettingProfile(0); // Set default profile
                    }
                    else {
                        alert('Deleting profile failed!');
                    }
                },
                error: function (data) {
                    alert('Deleting profile failed!');
                }
            });
        }

        function exportBettingProfile(id) {
            alert('Feature is under construction');
        }

        function createNewProfile() {
            alert('Creating new profile');
        }

        function editBet(id) {
            alert('Editing bet with id: ' + id);
        }

        function deleteBet(id) {
            alert('Deleting bet with id: ' + id);
        }

        function addBetToProfile(id) {
            alert('Adding bet to profile with id: ' + id);
        }

        function createSingle() {
            alert('Creating single');
        }

        function createParlay() {
            alert('Creating parlay');
        }

        // Set tabs
        $('#analysisProfit a:first').tab('show');

        // Set sparklines
        $('.sparktristate').sparkline('html', { type: 'tristate' });

        // Betting profiles pagination
        var pageParts = $("#betting-profiles a");
        var numPages = pageParts.length;
        var perPage = 4;
        pageParts.slice(perPage).hide();
        $('#betting-profiles-nav').pagination({
            items: numPages,
            itemsOnPage: perPage,
            cssStyle: "light-theme",
            onPageClick: function (pageNum) {
                var start = perPage * (pageNum - 1);
                var end = start + perPage;
                pageParts.hide().slice(start, end).show();
            }
        });

        // Bets table filtering
        $.fn.dataTable.ext.search.push(
            function (settings, searchData, index, rowData, counter) {
                var gameSiteList = $('#gameSiteList-text').text();
                var betTypesList = $('#betTypesList-text').text();
                var betSizesList = $('#betSizesList-text').text();
                var gameTimesList = $('#gameTimesList-text').text();

                //var min = parseInt($('#min').val(), 10);
                //var max = parseInt($('#max').val(), 10);
                //var age = parseFloat(data[3]) || 0; // use data for the age column

                //if ((isNaN(min) && isNaN(max)) ||
                //        (isNaN(min) && age <= max) ||
                //        (min <= age && isNaN(max)) ||
                //        (min <= age && age <= max)) {
                //    return true;
                //}
                return true;
            }
        );

        // Table fix for fixed columns
        var table = $('#bets-table').DataTable({
            "paging": true,
            "ordering": true,
            "info": true,
            "createdRow": function (row, data, index) {
                $('td', row).eq(9).html('<a href="javascript:editBet(' + data[9] + ')"><i class="fa fa-pencil"></i></a>');
                $('td', row).eq(10).html('<a href="javascript:deleteBet(' + data[10] + ')"><i class="fa fa-trash"></i></a>');
                $('td', row).eq(11).html('<a href="javascript:addBetToProfile(' + data[11] + ')"><i class="fa fa-plus"></i></a>');
            }
        });

        // Statistics tables
        var statTables = [];
        @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileStatisticViewModel stat in this.Model.DefaultProfile.Statistics)
        {
            <text>
        statTables.push($('#@stat.Name-stat table').DataTable({
            "paging": true,
            "ordering": true,
            "searching": false,
            "info": true
        }));
        </text>
        }

        // TODO for premium
        // Event listener to the two range filtering inputs to redraw on input
        $('#gameSiteList a, #betTypesList a, #betSizesList a, #gameTimesList a').on('click', function () {
            $('#' + $(this).parent().parent().attr('id') + '-text').text($(this).text());

            table.draw();

            $.fn.dataTable.ext.search.pop();

            // Refresh Statistics and Charts with new set of data
        });

        // Set charts
        var chartOptions = {
            cutoutPercentage: 50, // This is 0 for Pie charts
            animation: {
                numSteps: 100,
                easing: "easeOutBounce",
                animateRotate: true,
                animateScale: false
            },
            responsive: true,
            maintainAspectRatio: false,
            legend: {
                display: false
            }
        };
        var chartData = [];
        @for (int i = 0; i < this.Model.DefaultProfile.Charts.Count; i++)
        {
        BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileChartViewModel chart = this.Model.DefaultProfile.Charts[i];
        <text>
        chartData.push([@chart.TotalValue, @chart.MoneylineValue, @chart.Handicap, @chart.Parlay]);
        $('a[href=#@chart.Name]').on('shown.bs.tab', function () {
            $('#@chart.Name-chart').replaceWith('<canvas id="@chart.Name-chart" height="150"></canvas>');
            var ctx = $('#@chart.Name-chart').get(0).getContext('2d');
            var myDoughnutChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [
                        "Total",
                        "Moneyline",
                        "Handicap",
                        "Parlay"
                    ],
                    datasets: [{
                        data: chartData[@i],
                        backgroundColor: [
                            "#f56954",
                            "#00a65a",
                            "#f39c12",
                            "#00c0ef",
                        ],
                        hoverBackgroundColor: [
                            "#f56954",
                            "#00a65a",
                            "#f39c12",
                            "#00c0ef",
                        ],
                        borderColor: "#fff",
                        borderWidth: 1
                    }]
                },
                options: chartOptions
            });
        });
        </text>
        }
        $.each($('a[href$="-chart"]'), function (index, value) {
            $(value).tab('show');
        });
        $('a[href=#@this.Model.DefaultProfile.Charts.First().Name]').tab('show');

    </script>
}