@{
    ViewBag.Title = "BetsTracker";
    Layout = "~/Views/Dashboard/_Layout.cshtml";
}

@section Styles {
    @Styles.Render("~/Content/dashboard-css")
    @Styles.Render("~/Content/Dashboard/BetsTracker.css")
}

@model BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerViewModel

<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Bets tracker
        <small>NBA</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="/Dashboard/"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Bets tracker</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">

    <!-- Main row -->
    <div class="row">

        <!-- Game results -->
        <section class="col-lg-12 col-md-12 col-sm-12 hidden-xs">
            <div class="box box-primary animateWithDelayTop">
                <div class="box-header with-border">
                    Game results
                </div>
                <div class="box-body">
                    <div class="tab-content">
                        Scrolling boxes with game results
                    </div>
                </div>
            </div>
        </section>

        <!-- Overall stats -->
        <section class="col-lg-12 col-md-12 col-sm-12 hidden-xs">
            <div class="box box-primary animateWithDelayTop">
                <div class="box-header with-border">
                    <ul class="nav nav-tabs nav-justified" id="analysisProfit">
                        @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerAnalysisProfitViewModel analyseProfit in this.Model.AnalysisProfit)
                        {
                            <li>
                                <a href="#@analyseProfit.Name" data-toggle="tab"><h5><strong>@analyseProfit.Label</strong></h5></a>
                            </li>
                        }
                    </ul>
                    <div class="box-tools pull-right">
                        <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                        <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="tab-content">
                        @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerAnalysisProfitViewModel analyseProfit in this.Model.AnalysisProfit)
                        {
                            <div role="tabpanel" class="tab-pane" id="@analyseProfit.Name">
                                <!-- Total Bets -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem01">
                                        <span class="info-box-icon bg-aqua"><i class="fa fa-folder-open"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Total Bets</span>
                                            <span class="info-box-number2">@analyseProfit.TotalBets</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Wins -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem02">
                                        <span class="info-box-icon bg-green"><i class="fa fa-thumbs-up"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Wins</span>
                                            <span class="info-box-number2">@analyseProfit.Wins</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- fix for small devices only -->
                                <div class="clearfix visible-sm-block"></div>

                                <!-- Losses -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem03">
                                        <span class="info-box-icon bg-red"><i class="fa fa-thumbs-down"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Losses</span>
                                            <span class="info-box-number2">@analyseProfit.Losses</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Average Odds -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem04">
                                        <span class="info-box-icon bg-blue-active"><i class="fa fa-balance-scale"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Average Odds</span>
                                            <span class="info-box-number2">@analyseProfit.AverageOdds</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- ROI -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem05">
                                        <span class="info-box-icon bg-purple-active">
                                            <i class="fa fa-line-chart"></i>
                                        </span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">ROI</span>
                                            <span class="info-box-number2">@analyseProfit.ROI %</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Total Profit -->
                                <div class="col-lg-2 col-md-4 col-sm-6 col-xs-12">
                                    <div class="info-box ibItem06">
                                        <span class="info-box-icon bg-green-active"><i class="fa fa-money"></i></span>
                                        <div class="info-box-content">
                                            <span class="info-box-text">Total Profit</span>
                                            <span class="info-box-number2">$ @analyseProfit.TotalProfit</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </section>

        <!-- Section-Left -->
        <section class="col-lg-3 col-md-4 col-sm-12 col-xs-12 connectedSortable ui-sortable">

            <!-- Betting Profiles -->
            <section class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="box box-primary animateWithDelayLeft">
                    <div class="box-header with-border">
                        <i class="fa fa-trophy"></i>
                        <h3 class="box-title"><span class="label label-warning">PREMIUM</span> Betting Profiles</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="col-md-12 hidden-xs hidden-sm">
                            <div class="list-group bettingProfilesList" id="betting_profiles">
                                @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerBettingProfileViewModel bettingProfile in this.Model.BettingProfiles) {
                                    <a href="javascript:getBettingProfile('@bettingProfile.Id')" class="list-group-item @(bettingProfile.ActiveTab ? "active" : string.Empty)">
                                        <span class="badge">@bettingProfile.OpenBets</span>
                                        @bettingProfile.Label
                                    </a>
                                }
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-xs-12 col-offset-2 visible-xs visible-sm">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <select class="form-control" onchange="javascript: getBettingProfile(this.value)" tabindex="-1">
                                        @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerBettingProfileViewModel bettingProfile in this.Model.BettingProfiles)
                                        {
                                            <option value="@bettingProfile.Id">@bettingProfile.Label</option>
                                        }
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Performance -->
            <section class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="box box-primary animateWithDelayLeft">
                    <div class="box-header with-border">
                        <i class="fa fa-trophy"></i>
                        <h3 class="box-title"><span class="label label-warning">PREMIUM</span> Performance</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="table-responsive">
                            <table class="table table-striped" style="text-align:center">
                                <thead>
                                    <tr>
                                        <th style="text-align:center">Profile</th>
                                        <th style="text-align:center">ROI</th>
                                        <th style="text-align:center">Profit</th>
                                </thead>
                                <tbody>
                                    @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerPerformanceViewModel performance in this.Model.Performances)
                                    { 
                                        <tr>
                                            <td align="center">@performance.Profile</td>
                                            <td align="center">@performance.ROI %</td>
                                            <td align="center">@performance.Profit Units</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

        </section>

        <!-- Section-Right -->
        <section class="col-lg-9 col-md-8 col-sm-12 col-xs-12 connectedSortable ui-sortable">

            <!-- Bets Tracker Bets History -->
            <section class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="box box-primary animateWithDelayRight">
                    <div class="box-header with-border">
                        <h3 class="box-title">Bets Tracker Bets History</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <div class="row">
                            <!-- Create/Delete profile-->
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="newBet">
                                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i> New Bet
                                    <div class="btn-group">
                                        <a href="javascript:createSingle()" class="btn btn-primary" type="button">
                                            Single
                                        </a>
                                        <a href="javascript:createParlay()" class="btn btn-warning" type="button">
                                            Parlay
                                        </a>
                                    </div>
                                </div>
                                <div class="pull-right">
                                    <a href="javascript:deleteBettingProfile('0')" class="btn btn-danger">Delete profile</a>
                                </div>
                            </div>

                            <!-- Filters -->
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 button_group">
                                <div class="horizontalText"><span>Filters</span></div>
                                <div class="dropdown marginleft15">
                                    <button id="gameSiteBtn" class="customBtn01 button_md dropdown-toggle" type="button" data-toggle="dropdown">
                                        <span class="buttonLabel">Game Site</span>
                                        <span class="bottom_border"></span>
                                        <i class="fa fa-filter" aria-hidden="true"></i>
                                        <span class="btnText">All Games</span>
                                        <span class="caret"></span>
                                    </button>
                                    <ul id="gameSiteList" class="dropdown-menu">
                                        <li><a href="#">All Games</a></li>
                                        <li><a href="#">Home</a></li>
                                        <li><a href="#">Away</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown">
                                    <button id="betTypesBtn" class="customBtn01 button_md dropdown-toggle" type="button" data-toggle="dropdown">
                                        <span class="buttonLabel">Bet Types</span>
                                        <span class="bottom_border"></span>
                                        <i class="fa fa-filter" aria-hidden="true"></i>
                                        <span class="btnText">All Bet Types</span>
                                        <span class="caret"></span>
                                    </button>
                                    <ul id="betTypesList" class="dropdown-menu">
                                        <li><a href="#">All Bet Types</a></li>
                                        <li><a href="#">Totals</a></li>
                                        <li><a href="#">Moneyline</a></li>
                                        <li><a href="#">Handicap</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown">
                                    <button id="betSizesBtn" class="customBtn01 button_md dropdown-toggle" type="button" data-toggle="dropdown">
                                        <span class="buttonLabel">Bet Sizes</span>
                                        <span class="bottom_border"></span>
                                        <i class="fa fa-filter" aria-hidden="true"></i>
                                        <span class="btnText">All Bet Sizes</span>
                                        <span class="caret"></span>
                                    </button>
                                    <ul id="betSizesList" class="dropdown-menu">
                                        <li><a href="#">All Bet Sizes</a></li>
                                        <li><a href="#">1 - 5 Units</a></li>
                                        <li><a href="#">5 - 10 Units</a></li>
                                        <li><a href="#">10+ Units</a></li>
                                    </ul>
                                </div>
                                <div class="dropdown">
                                    <button id="gameTimesBtn" class="customBtn01 button_md dropdown-toggle" type="button" data-toggle="dropdown">
                                        <span class="buttonLabel">Game Times</span>
                                        <span class="bottom_border"></span>
                                        <i class="fa fa-filter" aria-hidden="true"></i>
                                        <span class="btnText">All Time</span>
                                        <span class="caret"></span>
                                    </button>
                                    <ul id="gameTimesList" class="dropdown-menu">
                                        <li><a href="#">All Time</a></li>
                                        <li><a href="#">Last 7 days</a></li>
                                        <li><a href="#">Last 14 days</a></li>
                                        <li><a href="#">Last 30 days</a></li>
                                        <li><a href="#">Last 60 days</a></li>
                                        <li><a href="#">Last 90 days</a></li>
                                        <li><a href="#">Last 6 months</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <!-- Bets -->
                                <div class="table-responsive" style="padding-top:20px">
                                    <table id="example" class="table table-striped responsive-utilities jambo_table">
                                        <thead>
                                            <tr class="headings">
                                                <th class="text-center">Ticket type</th>
                                                <th class="text-center">Date</th>
                                                <th class="text-center">Game</th>
                                                <th class="text-center">Bet Amount</th>
                                                <th class="text-center">Odds</th>
                                                <th class="text-center">Bet Value</th>
                                                <th class="text-center">Bet Status</th>
                                                <th class="text-center">Profit/Loss</th>
                                                <th class="text-center">Site</th>
                                                <th class="text-center">Edit</th>
                                                <th class="text-center">Delete</th>
                                                <th class="text-center">Add to profile</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileBetViewModel bet in this.Model.DefaultProfile.Bets)
                                            { 
                                                <tr class="text-center">
                                                    <td>@bet.Type</td>
                                                    <td>@bet.Timestamp</td>
                                                    <td>@bet.Game</td>
                                                    <td>@bet.BetAmount</td>
                                                    <td>@bet.Odds</td>
                                                    <td>@bet.BetValue</td>
                                                    <td>@bet.BetStatus</td>
                                                    <td>@bet.ProfitLoss</td>
                                                    <td>@bet.Site</td>
                                                    <td><a href="javascript:editBet('@bet.Id')"><i class="fa fa-pencil"></i></a></td>
                                                    <td><a href="javascript:deleteBet('@bet.Id')"><i class="fa fa-trash"></i></a></td>
                                                    <td><a href="javascript:addBetToProfile('@bet.Id')"><i class="fa fa-plus"></i></a></td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Statistics -->
            <section class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <div class="box box-primary animateWithDelayRight">
                    <div class="box-header with-border">
                        <h3 class="box-title">Statistics</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <ul class="nav nav-tabs nav-justified customnav" id="statistics">
                            @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileStatisticViewModel stat in this.Model.DefaultProfile.Statistics)
                            {
                                <li @(stat.ActiveTab ? "class=active" : string.Empty)>
                                    <a href="#@stat.Name" data-toggle="tab"><h5><strong>@stat.Label</strong></h5></a>
                                </li>
                            }
                        </ul>
                        <div class="table-responsive">
                            <div class="tab-content">
                                @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileStatisticViewModel stat in this.Model.DefaultProfile.Statistics)
                                {
                                    <div role="tabpanel" class="tab-pane @(stat.ActiveTab ? "active" : string.Empty)" id="@stat.Name">
                                        <table class="table table-striped" style="text-align:center">
                                            <thead>
                                                <tr>
                                                    <th class="text-center">Date</th>
                                                    <th class="text-center">Wins</th>
                                                    <th class="text-center">Losses</th>
                                                    <th class="text-center">Invested</th>
                                                    <th class="text-center">Profit +/-</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="text-center">
                                                    <td>@stat.Date</td>
                                                    <td>@stat.Wins</td>
                                                    <td>@stat.Losses</td>
                                                    <td>@stat.Invested</td>
                                                    <td>@stat.Profit</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Charts & Graphs -->
            <section class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <div class="box box-primary animateWithDelayRight">
                    <div class="box-header with-border">
                        <h3 class="box-title">Charts & Graphs</h3>
                        <div class="box-tools pull-right">
                            <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-minus"></i></button>
                            <button class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip" title="Remove"><i class="fa fa-times"></i></button>
                        </div>
                    </div>
                    <div class="box-body">
                        <ul class="nav nav-tabs nav-justified customnav" id="charts">
                            @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileChartViewModel chart in this.Model.DefaultProfile.Charts)
                            {
                                <li @(chart.ActiveTab ? "class=active" : string.Empty)>
                                    <a href="#@chart.Name" data-toggle="tab"><h5><strong>@chart.Label</strong></h5></a>
                                </li>
                            }
                        </ul>
                        <div class="tab-content">
                            @foreach (BetsKiller.ViewModel.Dashboard.BetsTracker.BetsTrackerProfileChartViewModel chart in this.Model.DefaultProfile.Charts)
                            {
                                <div role="tabpanel" class="tab-pane @(chart.ActiveTab ? "active" : string.Empty)" id="@chart.Name">
                                    @chart.Value
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </section>

        </section>

    </div>

</section>

@section Scripts {
    <script>
        function getBettingProfile(id) {
            alert('Get betting profile with id: ' + id);

            $.ajax({
                url: '/Dashboard/BetsTracker/GetBettingProfile/' + id,
                dataType: 'html',
                success: function (data) {
                    // Take a look that first tabs are active in Statistics and Charts
                }
            });
        }

        function deleteBettingProfile(id) {
            alert('Deleting betting profile with id: ' + id);

            $.ajax({
                url: '/Dashboard/BetsTracker/DeleteBettingProfile/' + id,
                dataType: 'html',
                success: function (data) {
                    // Select default profile "All"
                }
            });
        }

        function editBet(id) {
            alert('Editing bet with id: ' + id);
        }

        function deleteBet(id) {
            alert('Deleting bet with id: ' + id);
        }

        function addBetToProfile(id) {
            alert('Adding bet to profile with id: ' + id);
        }

        function createSingle() {
            alert('Creating single');
        }

        function createParlay() {
            alert('Creating parlay');
        }

        // Set tabs
        $('#analysisProfit a:first').tab('show');

    </script>
}